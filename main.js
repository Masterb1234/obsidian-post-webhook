/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PostWebhookPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/settings/WebhookSettingsTab.ts
var import_obsidian2 = require("obsidian");

// src/settings/components/WebhookItem.ts
var import_obsidian = require("obsidian");
var WebhookItem = class {
  constructor(container, webhook, index, onUpdate, onRemove) {
    this.container = container;
    this.webhook = webhook;
    this.index = index;
    this.onUpdate = onUpdate;
    this.onRemove = onRemove;
    this.display();
  }
  display() {
    new import_obsidian.Setting(this.container).setName("Webhook Name").setDesc("Enter a name for this Webhook").addText((text) => text.setValue(this.webhook.name).onChange(async (value) => {
      await this.onUpdate(this.index, { name: value });
    }));
    new import_obsidian.Setting(this.container).setName("Webhook URL").setDesc("Enter the URL for this Webhook").addText((text) => text.setValue(this.webhook.url).onChange(async (value) => {
      await this.onUpdate(this.index, { url: value });
    }));
    new import_obsidian.Setting(this.container).setName("Insert Response").setDesc("Append Webhook response to the note").addToggle((toggle) => toggle.setValue(this.webhook.attachResponse).onChange(async (value) => {
      await this.onUpdate(this.index, { attachResponse: value });
    }));
    new import_obsidian.Setting(this.container).setName("Exclude Attachments").setDesc("Do not send any attachments with this Webhook").addToggle((toggle) => toggle.setValue(this.webhook.excludeAttachments || false).onChange(async (value) => {
      await this.onUpdate(this.index, { excludeAttachments: value });
    }));
    new import_obsidian.Setting(this.container).setName("Include Webhook context").setDesc("Enable adding another note with context before sending this Webhook").addToggle((toggle) => toggle.setValue(this.webhook.includeVariableNote || false).onChange(async (value) => {
      await this.onUpdate(this.index, { includeVariableNote: value });
    }));
    new import_obsidian.Setting(this.container).addButton((button) => button.setButtonText("Remove Webhook").setClass("mod-warning").onClick(async () => {
      await this.onRemove(this.index);
    }));
  }
};

// src/settings/WebhookSettingsTab.ts
var WebhookSettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.displayWebhooks();
    this.displayAddWebhookButton();
  }
  displayWebhooks() {
    this.plugin.settings.webhooks.forEach((webhook, index) => {
      const webhookContainer = this.containerEl.createDiv();
      webhookContainer.addClass("webhook-container");
      new WebhookItem(
        webhookContainer,
        webhook,
        index,
        this.updateWebhook.bind(this),
        this.removeWebhook.bind(this)
      );
      webhookContainer.createEl("hr");
    });
  }
  displayAddWebhookButton() {
    new import_obsidian2.Setting(this.containerEl).addButton((button) => button.setButtonText("Add Webhook").onClick(async () => {
      this.plugin.settings.webhooks.push({
        id: crypto.randomUUID(),
        name: "New Webhook",
        url: "",
        attachResponse: false,
        excludeAttachments: false,
        includeVariableNote: false
      });
      await this.plugin.saveSettings();
      this.display();
    }));
  }
  async updateWebhook(index, updates) {
    this.plugin.settings.webhooks[index] = {
      ...this.plugin.settings.webhooks[index],
      ...updates
    };
    await this.plugin.saveSettings();
  }
  async removeWebhook(index) {
    this.plugin.settings.webhooks.splice(index, 1);
    await this.plugin.saveSettings();
    this.display();
  }
};

// src/commands/WebhookCommands.ts
var import_obsidian9 = require("obsidian");

// src/utils/SelectionCache.ts
var SelectionCache = class {
  constructor() {
    this.CACHE_TIMEOUT = 5e3;
    this.cache = {
      text: "",
      timestamp: 0
    };
    this.setupMutationObserver();
    this.setupSelectionListener();
  }
  setupMutationObserver() {
    this.observer = new MutationObserver(() => {
      this.updateFromEditor();
    });
    this.observer.observe(document.body, {
      childList: true,
      subtree: true,
      characterData: true
    });
  }
  setupSelectionListener() {
    document.addEventListener("selectionchange", () => {
      this.updateFromEditor();
    });
  }
  updateFromEditor() {
    var _a, _b;
    const activeLeaf = (_b = (_a = window.app) == null ? void 0 : _a.workspace) == null ? void 0 : _b.activeLeaf;
    if (!activeLeaf)
      return;
    const view = activeLeaf.view;
    const editor = view == null ? void 0 : view.editor;
    if (editor == null ? void 0 : editor.getSelection) {
      const selection = editor.getSelection();
      if (selection) {
        this.updateCache(selection);
      }
    }
  }
  updateCache(text) {
    this.cache = {
      text,
      timestamp: Date.now()
    };
  }
  getSelection() {
    var _a, _b;
    const activeLeaf = (_b = (_a = window.app) == null ? void 0 : _a.workspace) == null ? void 0 : _b.activeLeaf;
    if (!activeLeaf)
      return "";
    const view = activeLeaf.view;
    const editor = view == null ? void 0 : view.editor;
    if (editor == null ? void 0 : editor.getSelection) {
      const selection = editor.getSelection();
      if (selection) {
        return selection;
      }
    }
    const currentTime = Date.now();
    if (currentTime - this.cache.timestamp < this.CACHE_TIMEOUT) {
      return this.cache.text;
    }
    return "";
  }
  destroy() {
    var _a;
    (_a = this.observer) == null ? void 0 : _a.disconnect();
  }
};

// src/services/WebhookService.ts
var import_obsidian8 = require("obsidian");

// src/services/AttachmentService.ts
var import_obsidian4 = require("obsidian");

// src/utils/MimeTypeUtils.ts
var MimeTypeUtils = class {
  static getMimeType(extension) {
    var _a;
    return this.mimeTypes[(_a = extension == null ? void 0 : extension.toLowerCase()) != null ? _a : ""] || "application/octet-stream";
  }
  static getExtensionFromMimeType(mimeType) {
    for (const [ext, mime] of Object.entries(this.mimeTypes)) {
      if (mimeType.includes(mime))
        return `.${ext}`;
    }
    return ".bin";
  }
};
MimeTypeUtils.mimeTypes = {
  png: "image/png",
  jpg: "image/jpeg",
  jpeg: "image/jpeg",
  gif: "image/gif",
  webp: "image/webp",
  svg: "image/svg+xml",
  mp3: "audio/mpeg",
  wav: "audio/wav",
  ogg: "audio/ogg",
  m4a: "audio/mp4",
  mp4: "video/mp4",
  webm: "video/webm",
  ogv: "video/ogg",
  mov: "video/quicktime",
  pdf: "application/pdf",
  doc: "application/msword",
  docx: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
  json: "application/json",
  xml: "application/xml",
  zip: "application/zip"
};

// src/utils/YAMLParser.ts
var import_obsidian3 = require("obsidian");
var YAMLParser = class {
  static async getExcludedAttachments(content) {
    try {
      const info = (0, import_obsidian3.getFrontMatterInfo)(content);
      if (!info.exists || !info.frontmatter) {
        return [];
      }
      let frontmatter;
      try {
        frontmatter = (0, import_obsidian3.parseYaml)(info.frontmatter);
      } catch (yamlError) {
        console.warn("Invalid YAML frontmatter:", yamlError);
        return [];
      }
      if (!frontmatter || typeof frontmatter !== "object") {
        return [];
      }
      const excludeAttachment = frontmatter["exclude-attachment"];
      if (!excludeAttachment) {
        return [];
      }
      if (typeof excludeAttachment === "string") {
        return [excludeAttachment];
      }
      if (Array.isArray(excludeAttachment)) {
        return excludeAttachment.filter((item) => typeof item === "string").map((item) => item.trim()).filter(Boolean);
      }
      return [];
    } catch (error) {
      console.error("Error processing frontmatter:", error);
      return [];
    }
  }
  static isValidYaml(content) {
    try {
      const info = (0, import_obsidian3.getFrontMatterInfo)(content);
      if (!info.exists || !info.frontmatter) {
        return true;
      }
      (0, import_obsidian3.parseYaml)(info.frontmatter);
      return true;
    } catch (error) {
      return false;
    }
  }
};

// src/services/AttachmentService.ts
var AttachmentService = class {
  static async getAttachments(app, file, excludeAll = false) {
    if (excludeAll) {
      return [];
    }
    const attachments = [];
    const cache = app.metadataCache.getFileCache(file);
    if (!cache) {
      return attachments;
    }
    const fileContent = await app.vault.read(file);
    const excludeList = await YAMLParser.getExcludedAttachments(fileContent);
    await this.processEmbeds(app, file, cache.embeds, excludeList, attachments);
    return attachments;
  }
  static async processEmbeds(app, file, embeds, excludeList, attachments) {
    if (!embeds)
      return;
    for (const embed of embeds) {
      if (!embed.link)
        continue;
      const linkedFile = app.metadataCache.getFirstLinkpathDest(embed.link, file.path);
      if (!linkedFile || !(linkedFile instanceof import_obsidian4.TFile) || excludeList.includes(linkedFile.name)) {
        continue;
      }
      const attachment = await this.processAttachment(app, linkedFile);
      if (attachment) {
        attachments.push(attachment);
      }
    }
  }
  static async processAttachment(app, file) {
    try {
      const arrayBuffer = await app.vault.readBinary(file);
      const base64Data = (0, import_obsidian4.arrayBufferToBase64)(arrayBuffer);
      const extension = file.extension.toLowerCase();
      const mimeType = MimeTypeUtils.getMimeType(extension);
      return {
        name: file.name,
        type: extension,
        mimeType,
        size: arrayBuffer.byteLength,
        data: base64Data,
        path: file.path
      };
    } catch (error) {
      console.error(`Failed to process attachment ${file.name}:`, error);
      return null;
    }
  }
};

// src/services/PayloadService.ts
var import_obsidian5 = require("obsidian");
var PayloadService = class {
  static createPayload(content, filename, attachments, selectedText, variableNote) {
    const info = (0, import_obsidian5.getFrontMatterInfo)(content);
    let payload;
    if (!info.exists) {
      payload = {
        content: selectedText || content,
        filename,
        timestamp: Date.now(),
        attachments
      };
    } else {
      const frontmatter = (0, import_obsidian5.parseYaml)(info.frontmatter);
      const noteContent = selectedText || content.slice(info.contentStart).trim();
      payload = {
        ...frontmatter,
        content: noteContent,
        filename,
        timestamp: Date.now(),
        attachments
      };
    }
    if (variableNote == null ? void 0 : variableNote.variables) {
      payload = {
        ...payload,
        ...variableNote.variables
      };
    }
    return payload;
  }
};

// src/utils/ContentTypeUtils.ts
var ContentTypeUtils = class {
  static isTextContent(contentType = "") {
    const textTypes = [
      "text/",
      "application/json",
      "application/xml",
      "application/javascript",
      "application/ecmascript",
      "application/x-httpd-php",
      "application/x-yaml"
    ];
    contentType = contentType.toLowerCase();
    return textTypes.some((type) => contentType.includes(type));
  }
};

// src/utils/FileUtils.ts
var FileUtils = class {
  static generateFilename(contentType) {
    const extension = MimeTypeUtils.getExtensionFromMimeType(contentType);
    const timestamp = Date.now();
    return `webhook-response-${timestamp}${extension}`;
  }
};

// src/services/ResponseHandler.ts
var ResponseHandler = class {
  static async processResponse(app, response) {
    var _a, _b;
    const contentType = (((_a = response.headers) == null ? void 0 : _a["content-type"]) || ((_b = response.headers) == null ? void 0 : _b["Content-Type"]) || "").toLowerCase();
    if (contentType.includes("application/json")) {
      return this.formatJsonResponse(response);
    }
    if (ContentTypeUtils.isTextContent(contentType)) {
      return this.formatTextResponse(response);
    }
    return this.processBinaryResponse(app, response, contentType);
  }
  static async formatJsonResponse(response) {
    try {
      const jsonData = await response.json;
      return "```json\n" + JSON.stringify(jsonData, null, 2) + "\n```";
    } catch (error) {
      console.error("Failed to parse JSON response:", error);
      return "Failed to parse JSON response";
    }
  }
  static async formatTextResponse(response) {
    try {
      return await response.text;
    } catch (error) {
      console.error("Failed to get text response:", error);
      return "Failed to get text response";
    }
  }
  static async processBinaryResponse(app, response, contentType) {
    var _a;
    try {
      const buffer = await response.arrayBuffer;
      const filename = FileUtils.generateFilename(contentType);
      const attachmentFolder = ((_a = app.vault.config) == null ? void 0 : _a.attachmentFolderPath) || "attachments";
      try {
        await app.vault.createFolder(attachmentFolder);
      } catch (error) {
      }
      const file = await app.vault.createBinary(
        `${attachmentFolder}/${filename}`,
        buffer
      );
      return `![[${file.name}]]`;
    } catch (error) {
      console.error("Failed to process binary response:", error);
      return "Failed to process binary response";
    }
  }
};

// src/utils/UrlUtils.ts
var UrlUtils = class {
  static validateUrl(url) {
    try {
      const parsedUrl = new URL(url);
      return parsedUrl.protocol === "http:" || parsedUrl.protocol === "https:";
    } catch (e) {
      return false;
    }
  }
};

// src/ui/VariableNoteModal.ts
var import_obsidian7 = require("obsidian");

// src/services/VariableNoteService.ts
var VariableNoteService = class {
  static async findVariableNotes(vault, metadataCache) {
    const notes = [];
    const markdownFiles = vault.getMarkdownFiles();
    for (const file of markdownFiles) {
      const metadata = metadataCache.getFileCache(file);
      const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
      if ((frontmatter == null ? void 0 : frontmatter["post-webhook"]) === true) {
        const content = await vault.read(file);
        const variables = this.parseVariables(content);
        notes.push({
          title: file.basename,
          path: file.path,
          variables
        });
      }
    }
    return notes;
  }
  static parseVariables(content) {
    const variables = {};
    const lines = content.split("\n");
    let currentKey = null;
    let currentValue = [];
    for (const line of lines) {
      const match = line.match(/^--([\w_]+)/);
      if (match) {
        if (currentKey) {
          variables[currentKey] = currentValue.join("\n").trim();
          currentValue = [];
        }
        currentKey = match[1];
      } else if (currentKey) {
        currentValue.push(line);
      }
    }
    if (currentKey) {
      variables[currentKey] = currentValue.join("\n").trim();
    }
    return variables;
  }
};

// src/ui/components/VariableNoteSuggester.ts
var import_obsidian6 = require("obsidian");
var VariableNoteSuggester = class extends import_obsidian6.FuzzySuggestModal {
  constructor(app, notes, onChoose) {
    super(app);
    this.notes = notes;
    this.onChoose = onChoose;
  }
  getItems() {
    return this.notes;
  }
  getItemText(item) {
    return item.title;
  }
  onChooseItem(item) {
    this.onChoose(item);
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.item.title });
    el.createEl("small", { text: item.item.path });
  }
};

// src/ui/VariableNoteModal.ts
var VariableNoteModal = class extends import_obsidian7.Modal {
  constructor(app, onSubmit, onCancel) {
    super(app);
    this.notes = [];
    this.selectedNote = null;
    this.wasSubmitted = false;
    this.onSubmit = onSubmit;
    this.onCancel = onCancel;
  }
  async onOpen() {
    try {
      this.notes = await VariableNoteService.findVariableNotes(this.app.vault, this.app.metadataCache);
      if (this.notes.length === 0) {
        this.contentEl.createEl("div", { text: "No context notes found. Add post-webhook: true to note frontmatter." });
        return;
      }
      this.wasSubmitted = true;
      this.close();
      new VariableNoteSuggester(
        this.app,
        this.notes,
        (note) => {
          this.selectedNote = note;
          this.onSubmit(note);
        }
      ).open();
    } catch (error) {
      this.contentEl.createEl("div", { text: "Error loading context notes." });
      console.error("Error loading context notes:", error);
    }
  }
  onClose() {
    if (!this.wasSubmitted) {
      this.onCancel();
    }
    this.contentEl.empty();
  }
};

// src/services/WebhookService.ts
var WebhookService = class {
  static async sendContent(app, webhookUrl, content, filename, file, selectedText) {
    var _a;
    if (!webhookUrl) {
      throw new Error("Webhook URL is required");
    }
    if (!UrlUtils.validateUrl(webhookUrl)) {
      throw new Error("Invalid Webhook URL. Must be a valid HTTP or HTTPS URL");
    }
    try {
      const plugin = (_a = app.plugins) == null ? void 0 : _a.getPlugin("post-webhook");
      const webhook = plugin == null ? void 0 : plugin.settings.webhooks.find((w) => w.url === webhookUrl);
      let variableNote = null;
      if (webhook == null ? void 0 : webhook.includeVariableNote) {
        variableNote = await new Promise((resolve) => {
          new VariableNoteModal(
            app,
            (note) => resolve(note),
            () => resolve(null)
          ).open();
        });
        if (!variableNote) {
          throw new Error("Variable note selection cancelled");
        }
      }
      const attachments = await AttachmentService.getAttachments(app, file, webhook == null ? void 0 : webhook.excludeAttachments);
      const payload = PayloadService.createPayload(content, filename, attachments, selectedText, variableNote);
      const response = await (0, import_obsidian8.requestUrl)({
        url: webhookUrl,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json"
        },
        body: JSON.stringify(payload)
      });
      if (response.status >= 400) {
        throw new Error(`Request failed: ${response.status}`);
      }
      const processedResponse = await ResponseHandler.processResponse(app, response);
      return {
        status: response.status,
        text: processedResponse
      };
    } catch (error) {
      if (error.message === "Variable note selection cancelled") {
        throw error;
      }
      if (error.message.includes("Failed to fetch")) {
        throw new Error("Could not connect to the Webhook URL. Please check your internet connection and the URL");
      }
      throw new Error(`Failed to send Webhook: ${error.message}`);
    }
  }
};

// src/commands/WebhookCommands.ts
var WebhookCommands = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.registeredCommands = /* @__PURE__ */ new Set();
    this.selectionCache = new SelectionCache();
  }
  registerCommands() {
    this.unregisterCommands();
    this.plugin.settings.webhooks.forEach((webhook) => {
      const noteCommandId = `post-webhook-note-${webhook.id}`;
      this.plugin.addCommand({
        id: noteCommandId,
        name: `Send note to ${webhook.name}`,
        callback: async () => {
          const activeFile = this.plugin.app.workspace.getActiveFile();
          if (!activeFile) {
            new import_obsidian9.Notice("No active file");
            return;
          }
          try {
            const content = await this.plugin.app.vault.read(activeFile);
            const response = await WebhookService.sendContent(
              this.plugin.app,
              webhook.url,
              content,
              activeFile.name,
              activeFile
            );
            if (webhook.attachResponse && response.text) {
              const newContent = `${content}

${response.text}`;
              await this.plugin.app.vault.modify(activeFile, newContent);
            }
            new import_obsidian9.Notice(`Note sent to ${webhook.name}`);
          } catch (error) {
            new import_obsidian9.Notice(`Failed to send note: ${error instanceof Error ? error.message : String(error)}`);
          }
        }
      });
      this.registeredCommands.add(noteCommandId);
      const selectionCommandId = `post-webhook-selection-${webhook.id}`;
      this.plugin.addCommand({
        id: selectionCommandId,
        name: `Send selection to ${webhook.name}`,
        editorCallback: async (editor) => {
          const activeFile = this.plugin.app.workspace.getActiveFile();
          if (!activeFile) {
            new import_obsidian9.Notice("No active file");
            return;
          }
          const selection = editor.getSelection();
          if (!selection) {
            new import_obsidian9.Notice("No text selected");
            return;
          }
          try {
            const content = await this.plugin.app.vault.read(activeFile);
            const response = await WebhookService.sendContent(
              this.plugin.app,
              webhook.url,
              content,
              activeFile.name,
              activeFile,
              selection
            );
            if (webhook.attachResponse && response.text) {
              const selectionRange = editor.listSelections()[0];
              const end = selectionRange.head.line > selectionRange.anchor.line ? selectionRange.head : selectionRange.anchor;
              editor.replaceRange(`
${response.text}`, end);
            }
            new import_obsidian9.Notice(`Selection sent to ${webhook.name}`);
          } catch (error) {
            new import_obsidian9.Notice(`Failed to send selection: ${error instanceof Error ? error.message : String(error)}`);
          }
        }
      });
      this.registeredCommands.add(selectionCommandId);
    });
  }
  unregisterCommands() {
    this.registeredCommands.forEach((commandId) => {
      this.plugin.app.commands.removeCommand(commandId);
    });
    this.registeredCommands.clear();
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  webhooks: [{
    id: "default",
    name: "Default Webhook",
    url: "",
    attachResponse: false
  }],
  includeVariableNote: false
};
var PostWebhookPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    await this.loadSettings();
    this.webhookCommands = new WebhookCommands(this);
    this.webhookCommands.registerCommands();
    this.addSettingTab(new WebhookSettingsTab(this.app, this));
  }
  onunload() {
    var _a, _b;
    (_b = (_a = this.webhookCommands) == null ? void 0 : _a.selectionCache) == null ? void 0 : _b.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    var _a;
    await this.saveData(this.settings);
    (_a = this.webhookCommands) == null ? void 0 : _a.registerCommands();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzL1dlYmhvb2tTZXR0aW5nc1RhYi50cyIsICJzcmMvc2V0dGluZ3MvY29tcG9uZW50cy9XZWJob29rSXRlbS50cyIsICJzcmMvY29tbWFuZHMvV2ViaG9va0NvbW1hbmRzLnRzIiwgInNyYy91dGlscy9TZWxlY3Rpb25DYWNoZS50cyIsICJzcmMvc2VydmljZXMvV2ViaG9va1NlcnZpY2UudHMiLCAic3JjL3NlcnZpY2VzL0F0dGFjaG1lbnRTZXJ2aWNlLnRzIiwgInNyYy91dGlscy9NaW1lVHlwZVV0aWxzLnRzIiwgInNyYy91dGlscy9ZQU1MUGFyc2VyLnRzIiwgInNyYy9zZXJ2aWNlcy9QYXlsb2FkU2VydmljZS50cyIsICJzcmMvdXRpbHMvQ29udGVudFR5cGVVdGlscy50cyIsICJzcmMvdXRpbHMvRmlsZVV0aWxzLnRzIiwgInNyYy9zZXJ2aWNlcy9SZXNwb25zZUhhbmRsZXIudHMiLCAic3JjL3V0aWxzL1VybFV0aWxzLnRzIiwgInNyYy91aS9WYXJpYWJsZU5vdGVNb2RhbC50cyIsICJzcmMvc2VydmljZXMvVmFyaWFibGVOb3RlU2VydmljZS50cyIsICJzcmMvdWkvY29tcG9uZW50cy9WYXJpYWJsZU5vdGVTdWdnZXN0ZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFdlYmhvb2tTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MvV2ViaG9va1NldHRpbmdzVGFiJztcbmltcG9ydCB7IFdlYmhvb2tDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMvV2ViaG9va0NvbW1hbmRzJztcbmltcG9ydCB7IFdlYmhvb2tTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBXZWJob29rU2V0dGluZ3MgPSB7XG4gIHdlYmhvb2tzOiBbe1xuICAgIGlkOiAnZGVmYXVsdCcsXG4gICAgbmFtZTogJ0RlZmF1bHQgV2ViaG9vaycsXG4gICAgdXJsOiAnJyxcbiAgICBhdHRhY2hSZXNwb25zZTogZmFsc2VcbiAgfV0sXG4gIGluY2x1ZGVWYXJpYWJsZU5vdGU6IGZhbHNlXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3N0V2ViaG9va1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBXZWJob29rU2V0dGluZ3M7XG4gIHdlYmhvb2tDb21tYW5kczogV2ViaG9va0NvbW1hbmRzO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIFxuICAgIHRoaXMud2ViaG9va0NvbW1hbmRzID0gbmV3IFdlYmhvb2tDb21tYW5kcyh0aGlzKTtcbiAgICB0aGlzLndlYmhvb2tDb21tYW5kcy5yZWdpc3RlckNvbW1hbmRzKCk7XG4gICAgXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBXZWJob29rU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMud2ViaG9va0NvbW1hbmRzPy5zZWxlY3Rpb25DYWNoZT8uZGVzdHJveSgpO1xuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgdGhpcy53ZWJob29rQ29tbWFuZHM/LnJlZ2lzdGVyQ29tbWFuZHMoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgUG9zdFdlYmhvb2tQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBXZWJob29rSXRlbSB9IGZyb20gJy4vY29tcG9uZW50cy9XZWJob29rSXRlbSc7XG5pbXBvcnQgeyBXZWJob29rIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV2ViaG9va1NldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogUG9zdFdlYmhvb2tQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUG9zdFdlYmhvb2tQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICB0aGlzLmRpc3BsYXlXZWJob29rcygpO1xuICAgIHRoaXMuZGlzcGxheUFkZFdlYmhvb2tCdXR0b24oKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheVdlYmhvb2tzKCk6IHZvaWQge1xuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlYmhvb2tzLmZvckVhY2goKHdlYmhvb2ssIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCB3ZWJob29rQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoKTtcbiAgICAgIHdlYmhvb2tDb250YWluZXIuYWRkQ2xhc3MoJ3dlYmhvb2stY29udGFpbmVyJyk7XG5cbiAgICAgIG5ldyBXZWJob29rSXRlbShcbiAgICAgICAgd2ViaG9va0NvbnRhaW5lcixcbiAgICAgICAgd2ViaG9vayxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHRoaXMudXBkYXRlV2ViaG9vay5iaW5kKHRoaXMpLFxuICAgICAgICB0aGlzLnJlbW92ZVdlYmhvb2suYmluZCh0aGlzKVxuICAgICAgKTtcblxuICAgICAgLy8gQWRkIHNlcGFyYXRvciBhZnRlciBlYWNoIHdlYmhvb2tcbiAgICAgIHdlYmhvb2tDb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlBZGRXZWJob29rQnV0dG9uKCk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FkZCBXZWJob29rJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlYmhvb2tzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICBuYW1lOiAnTmV3IFdlYmhvb2snLFxuICAgICAgICAgICAgdXJsOiAnJyxcbiAgICAgICAgICAgIGF0dGFjaFJlc3BvbnNlOiBmYWxzZSxcbiAgICAgICAgICAgIGV4Y2x1ZGVBdHRhY2htZW50czogZmFsc2UsXG4gICAgICAgICAgICBpbmNsdWRlVmFyaWFibGVOb3RlOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZVdlYmhvb2soaW5kZXg6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxXZWJob29rPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlYmhvb2tzW2luZGV4XSA9IHtcbiAgICAgIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLndlYmhvb2tzW2luZGV4XSxcbiAgICAgIC4uLnVwZGF0ZXNcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW1vdmVXZWJob29rKGluZGV4OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWJob29rcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIHRoaXMuZGlzcGxheSgpO1xuICB9XG59IiwgImltcG9ydCB7IFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBXZWJob29rIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV2ViaG9va0l0ZW0ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSB3ZWJob29rOiBXZWJob29rLFxuICAgIHByaXZhdGUgaW5kZXg6IG51bWJlcixcbiAgICBwcml2YXRlIG9uVXBkYXRlOiAoaW5kZXg6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxXZWJob29rPikgPT4gUHJvbWlzZTx2b2lkPixcbiAgICBwcml2YXRlIG9uUmVtb3ZlOiAoaW5kZXg6IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPlxuICApIHtcbiAgICB0aGlzLmRpc3BsYXkoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdXZWJob29rIE5hbWUnKVxuICAgICAgLnNldERlc2MoJ0VudGVyIGEgbmFtZSBmb3IgdGhpcyBXZWJob29rJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0VmFsdWUodGhpcy53ZWJob29rLm5hbWUpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLm9uVXBkYXRlKHRoaXMuaW5kZXgsIHsgbmFtZTogdmFsdWUgfSk7XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1dlYmhvb2sgVVJMJylcbiAgICAgIC5zZXREZXNjKCdFbnRlciB0aGUgVVJMIGZvciB0aGlzIFdlYmhvb2snKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLndlYmhvb2sudXJsKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5vblVwZGF0ZSh0aGlzLmluZGV4LCB7IHVybDogdmFsdWUgfSk7XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0luc2VydCBSZXNwb25zZScpXG4gICAgICAuc2V0RGVzYygnQXBwZW5kIFdlYmhvb2sgcmVzcG9uc2UgdG8gdGhlIG5vdGUnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLndlYmhvb2suYXR0YWNoUmVzcG9uc2UpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLm9uVXBkYXRlKHRoaXMuaW5kZXgsIHsgYXR0YWNoUmVzcG9uc2U6IHZhbHVlIH0pO1xuICAgICAgICB9KSk7XG5cbiAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdFeGNsdWRlIEF0dGFjaG1lbnRzJylcbiAgICAgIC5zZXREZXNjKCdEbyBub3Qgc2VuZCBhbnkgYXR0YWNobWVudHMgd2l0aCB0aGlzIFdlYmhvb2snKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLndlYmhvb2suZXhjbHVkZUF0dGFjaG1lbnRzIHx8IGZhbHNlKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5vblVwZGF0ZSh0aGlzLmluZGV4LCB7IGV4Y2x1ZGVBdHRhY2htZW50czogdmFsdWUgfSk7XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgV2ViaG9vayBjb250ZXh0JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgYWRkaW5nIGFub3RoZXIgbm90ZSB3aXRoIGNvbnRleHQgYmVmb3JlIHNlbmRpbmcgdGhpcyBXZWJob29rJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAuc2V0VmFsdWUodGhpcy53ZWJob29rLmluY2x1ZGVWYXJpYWJsZU5vdGUgfHwgZmFsc2UpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLm9uVXBkYXRlKHRoaXMuaW5kZXgsIHsgaW5jbHVkZVZhcmlhYmxlTm90ZTogdmFsdWUgfSk7XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZW1vdmUgV2ViaG9vaycpXG4gICAgICAgIC5zZXRDbGFzcygnbW9kLXdhcm5pbmcnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5vblJlbW92ZSh0aGlzLmluZGV4KTtcbiAgICAgICAgfSkpO1xuICB9XG59IiwgImltcG9ydCB7IE5vdGljZSwgQ29tbWFuZCwgVEZpbGUsIEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTZWxlY3Rpb25DYWNoZSB9IGZyb20gJy4uL3V0aWxzL1NlbGVjdGlvbkNhY2hlJztcbmltcG9ydCB7IFdlYmhvb2tTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvV2ViaG9va1NlcnZpY2UnO1xuaW1wb3J0IFBvc3RXZWJob29rUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgV2ViaG9va0NvbW1hbmRzIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFBvc3RXZWJob29rUGx1Z2luO1xuICBwcml2YXRlIHJlZ2lzdGVyZWRDb21tYW5kczogU2V0PHN0cmluZz47XG4gIHNlbGVjdGlvbkNhY2hlOiBTZWxlY3Rpb25DYWNoZTtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFBvc3RXZWJob29rUGx1Z2luKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5yZWdpc3RlcmVkQ29tbWFuZHMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5zZWxlY3Rpb25DYWNoZSA9IG5ldyBTZWxlY3Rpb25DYWNoZSgpO1xuICB9XG5cbiAgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcbiAgICB0aGlzLnVucmVnaXN0ZXJDb21tYW5kcygpO1xuXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2ViaG9va3MuZm9yRWFjaCh3ZWJob29rID0+IHtcbiAgICAgIGNvbnN0IG5vdGVDb21tYW5kSWQgPSBgcG9zdC13ZWJob29rLW5vdGUtJHt3ZWJob29rLmlkfWA7XG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IG5vdGVDb21tYW5kSWQsXG4gICAgICAgIG5hbWU6IGBTZW5kIG5vdGUgdG8gJHt3ZWJob29rLm5hbWV9YCxcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFdlYmhvb2tTZXJ2aWNlLnNlbmRDb250ZW50KFxuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAsXG4gICAgICAgICAgICAgIHdlYmhvb2sudXJsLFxuICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICBhY3RpdmVGaWxlLm5hbWUsXG4gICAgICAgICAgICAgIGFjdGl2ZUZpbGVcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh3ZWJob29rLmF0dGFjaFJlc3BvbnNlICYmIHJlc3BvbnNlLnRleHQpIHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGAke2NvbnRlbnR9XFxuXFxuJHtyZXNwb25zZS50ZXh0fWA7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgbmV3Q29udGVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5vdGUgc2VudCB0byAke3dlYmhvb2submFtZX1gKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNlbmQgbm90ZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVnaXN0ZXJlZENvbW1hbmRzLmFkZChub3RlQ29tbWFuZElkKTtcblxuICAgICAgY29uc3Qgc2VsZWN0aW9uQ29tbWFuZElkID0gYHBvc3Qtd2ViaG9vay1zZWxlY3Rpb24tJHt3ZWJob29rLmlkfWA7XG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IHNlbGVjdGlvbkNvbW1hbmRJZCxcbiAgICAgICAgbmFtZTogYFNlbmQgc2VsZWN0aW9uIHRvICR7d2ViaG9vay5uYW1lfWAsXG4gICAgICAgIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yKSA9PiB7XG4gICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBXZWJob29rU2VydmljZS5zZW5kQ29udGVudChcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLFxuICAgICAgICAgICAgICB3ZWJob29rLnVybCxcbiAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgYWN0aXZlRmlsZS5uYW1lLFxuICAgICAgICAgICAgICBhY3RpdmVGaWxlLFxuICAgICAgICAgICAgICBzZWxlY3Rpb25cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh3ZWJob29rLmF0dGFjaFJlc3BvbnNlICYmIHJlc3BvbnNlLnRleHQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uUmFuZ2UgPSBlZGl0b3IubGlzdFNlbGVjdGlvbnMoKVswXTtcbiAgICAgICAgICAgICAgY29uc3QgZW5kID0gc2VsZWN0aW9uUmFuZ2UuaGVhZC5saW5lID4gc2VsZWN0aW9uUmFuZ2UuYW5jaG9yLmxpbmUgPyBcbiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25SYW5nZS5oZWFkIDogc2VsZWN0aW9uUmFuZ2UuYW5jaG9yO1xuICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGBcXG4ke3Jlc3BvbnNlLnRleHR9YCwgZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3IE5vdGljZShgU2VsZWN0aW9uIHNlbnQgdG8gJHt3ZWJob29rLm5hbWV9YCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzZW5kIHNlbGVjdGlvbjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVnaXN0ZXJlZENvbW1hbmRzLmFkZChzZWxlY3Rpb25Db21tYW5kSWQpO1xuICAgIH0pO1xuICB9XG5cbiAgdW5yZWdpc3RlckNvbW1hbmRzKCk6IHZvaWQge1xuICAgIHRoaXMucmVnaXN0ZXJlZENvbW1hbmRzLmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICh0aGlzLnBsdWdpbi5hcHAgYXMgYW55KS5jb21tYW5kcy5yZW1vdmVDb21tYW5kKGNvbW1hbmRJZCk7XG4gICAgfSk7XG4gICAgdGhpcy5yZWdpc3RlcmVkQ29tbWFuZHMuY2xlYXIoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBFZGl0b3IsIE1hcmtkb3duVmlldywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFNlbGVjdGlvbkNhY2hlIHtcbiAgcHJpdmF0ZSBjYWNoZToge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgfTtcbiAgcHJpdmF0ZSByZWFkb25seSBDQUNIRV9USU1FT1VUID0gNTAwMDtcbiAgcHJpdmF0ZSBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNhY2hlID0ge1xuICAgICAgdGV4dDogJycsXG4gICAgICB0aW1lc3RhbXA6IDBcbiAgICB9O1xuICAgIHRoaXMuc2V0dXBNdXRhdGlvbk9ic2VydmVyKCk7XG4gICAgdGhpcy5zZXR1cFNlbGVjdGlvbkxpc3RlbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwTXV0YXRpb25PYnNlcnZlcigpOiB2b2lkIHtcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVGcm9tRWRpdG9yKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBTZWxlY3Rpb25MaXN0ZW5lcigpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZUZyb21FZGl0b3IoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRnJvbUVkaXRvcigpOiB2b2lkIHtcbiAgICBjb25zdCBhY3RpdmVMZWFmID0gKHdpbmRvdyBhcyBhbnkpLmFwcD8ud29ya3NwYWNlPy5hY3RpdmVMZWFmIGFzIFdvcmtzcGFjZUxlYWY7XG4gICAgaWYgKCFhY3RpdmVMZWFmKSByZXR1cm47XG5cbiAgICBjb25zdCB2aWV3ID0gYWN0aXZlTGVhZi52aWV3IGFzIE1hcmtkb3duVmlldztcbiAgICBjb25zdCBlZGl0b3IgPSB2aWV3Py5lZGl0b3I7XG4gICAgXG4gICAgaWYgKGVkaXRvcj8uZ2V0U2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FjaGUoc2VsZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNhY2hlKHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUgPSB7XG4gICAgICB0ZXh0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfTtcbiAgfVxuXG4gIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSAod2luZG93IGFzIGFueSkuYXBwPy53b3Jrc3BhY2U/LmFjdGl2ZUxlYWYgYXMgV29ya3NwYWNlTGVhZjtcbiAgICBpZiAoIWFjdGl2ZUxlYWYpIHJldHVybiAnJztcblxuICAgIGNvbnN0IHZpZXcgPSBhY3RpdmVMZWFmLnZpZXcgYXMgTWFya2Rvd25WaWV3O1xuICAgIGNvbnN0IGVkaXRvciA9IHZpZXc/LmVkaXRvcjtcbiAgICBcbiAgICBpZiAoZWRpdG9yPy5nZXRTZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgaWYgKGN1cnJlbnRUaW1lIC0gdGhpcy5jYWNoZS50aW1lc3RhbXAgPCB0aGlzLkNBQ0hFX1RJTUVPVVQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlLnRleHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFdlYmhvb2tSZXNwb25zZSwgVmFyaWFibGVOb3RlLCBXZWJob29rIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQXR0YWNobWVudFNlcnZpY2UgfSBmcm9tICcuL0F0dGFjaG1lbnRTZXJ2aWNlJztcbmltcG9ydCB7IFBheWxvYWRTZXJ2aWNlIH0gZnJvbSAnLi9QYXlsb2FkU2VydmljZSc7XG5pbXBvcnQgeyBSZXNwb25zZUhhbmRsZXIgfSBmcm9tICcuL1Jlc3BvbnNlSGFuZGxlcic7XG5pbXBvcnQgeyBVcmxVdGlscyB9IGZyb20gJy4uL3V0aWxzL1VybFV0aWxzJztcbmltcG9ydCB7IFZhcmlhYmxlTm90ZU1vZGFsIH0gZnJvbSAnLi4vdWkvVmFyaWFibGVOb3RlTW9kYWwnO1xuXG5leHBvcnQgY2xhc3MgV2ViaG9va1NlcnZpY2Uge1xuICBzdGF0aWMgYXN5bmMgc2VuZENvbnRlbnQoXG4gICAgYXBwOiBBcHAsIFxuICAgIHdlYmhvb2tVcmw6IHN0cmluZywgXG4gICAgY29udGVudDogc3RyaW5nLCBcbiAgICBmaWxlbmFtZTogc3RyaW5nLCBcbiAgICBmaWxlOiBURmlsZSwgXG4gICAgc2VsZWN0ZWRUZXh0Pzogc3RyaW5nIHwgbnVsbFxuICApOiBQcm9taXNlPFdlYmhvb2tSZXNwb25zZT4ge1xuICAgIGlmICghd2ViaG9va1VybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJob29rIFVSTCBpcyByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIGlmICghVXJsVXRpbHMudmFsaWRhdGVVcmwod2ViaG9va1VybCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBXZWJob29rIFVSTC4gTXVzdCBiZSBhIHZhbGlkIEhUVFAgb3IgSFRUUFMgVVJMJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNhZmUgdHlwZSBhc3NlcnRpb24gZm9yIE9ic2lkaWFuJ3MgaW50ZXJuYWwgQVBJXG4gICAgICBjb25zdCBwbHVnaW4gPSAoYXBwIGFzIGFueSkucGx1Z2lucz8uZ2V0UGx1Z2luKCdwb3N0LXdlYmhvb2snKTtcbiAgICAgIGNvbnN0IHdlYmhvb2sgPSBwbHVnaW4/LnNldHRpbmdzLndlYmhvb2tzLmZpbmQoKHc6IFdlYmhvb2spID0+IHcudXJsID09PSB3ZWJob29rVXJsKTtcbiAgICAgIFxuICAgICAgbGV0IHZhcmlhYmxlTm90ZTogVmFyaWFibGVOb3RlIHwgbnVsbCA9IG51bGw7XG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2hvdyB2YXJpYWJsZSBub3RlIG1vZGFsIGlmIHRoZSB3ZWJob29rIGhhcyBpbmNsdWRlVmFyaWFibGVOb3RlIGVuYWJsZWRcbiAgICAgIGlmICh3ZWJob29rPy5pbmNsdWRlVmFyaWFibGVOb3RlKSB7XG4gICAgICAgIHZhcmlhYmxlTm90ZSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgbmV3IFZhcmlhYmxlTm90ZU1vZGFsKGFwcCwgXG4gICAgICAgICAgICAobm90ZSkgPT4gcmVzb2x2ZShub3RlKSxcbiAgICAgICAgICAgICgpID0+IHJlc29sdmUobnVsbClcbiAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXZhcmlhYmxlTm90ZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmFyaWFibGUgbm90ZSBzZWxlY3Rpb24gY2FuY2VsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgYXR0YWNobWVudHMgPSBhd2FpdCBBdHRhY2htZW50U2VydmljZS5nZXRBdHRhY2htZW50cyhhcHAsIGZpbGUsIHdlYmhvb2s/LmV4Y2x1ZGVBdHRhY2htZW50cyk7XG4gICAgICBjb25zdCBwYXlsb2FkID0gUGF5bG9hZFNlcnZpY2UuY3JlYXRlUGF5bG9hZChjb250ZW50LCBmaWxlbmFtZSwgYXR0YWNobWVudHMsIHNlbGVjdGVkVGV4dCwgdmFyaWFibGVOb3RlKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgdXJsOiB3ZWJob29rVXJsLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWVzdCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IGF3YWl0IFJlc3BvbnNlSGFuZGxlci5wcm9jZXNzUmVzcG9uc2UoYXBwLCByZXNwb25zZSk7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHRleHQ6IHByb2Nlc3NlZFJlc3BvbnNlIFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ1ZhcmlhYmxlIG5vdGUgc2VsZWN0aW9uIGNhbmNlbGxlZCcpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY29ubmVjdCB0byB0aGUgV2ViaG9vayBVUkwuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRoZSBVUkwnKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNlbmQgV2ViaG9vazogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBhcnJheUJ1ZmZlclRvQmFzZTY0LCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQXR0YWNobWVudCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IE1pbWVUeXBlVXRpbHMgfSBmcm9tICcuLi91dGlscy9NaW1lVHlwZVV0aWxzJztcbmltcG9ydCB7IFlBTUxQYXJzZXIgfSBmcm9tICcuLi91dGlscy9ZQU1MUGFyc2VyJztcblxuZXhwb3J0IGNsYXNzIEF0dGFjaG1lbnRTZXJ2aWNlIHtcbiAgc3RhdGljIGFzeW5jIGdldEF0dGFjaG1lbnRzKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgZXhjbHVkZUFsbCA9IGZhbHNlKTogUHJvbWlzZTxBdHRhY2htZW50W10+IHtcbiAgICBpZiAoZXhjbHVkZUFsbCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGF0dGFjaG1lbnRzOiBBdHRhY2htZW50W10gPSBbXTtcbiAgICBjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICBcbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICByZXR1cm4gYXR0YWNobWVudHM7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICBjb25zdCBleGNsdWRlTGlzdCA9IGF3YWl0IFlBTUxQYXJzZXIuZ2V0RXhjbHVkZWRBdHRhY2htZW50cyhmaWxlQ29udGVudCk7XG4gICAgYXdhaXQgdGhpcy5wcm9jZXNzRW1iZWRzKGFwcCwgZmlsZSwgY2FjaGUuZW1iZWRzLCBleGNsdWRlTGlzdCwgYXR0YWNobWVudHMpO1xuXG4gICAgcmV0dXJuIGF0dGFjaG1lbnRzO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgcHJvY2Vzc0VtYmVkcyhcbiAgICBhcHA6IEFwcCxcbiAgICBmaWxlOiBURmlsZSxcbiAgICBlbWJlZHM6IGFueVtdIHwgdW5kZWZpbmVkLFxuICAgIGV4Y2x1ZGVMaXN0OiBzdHJpbmdbXSxcbiAgICBhdHRhY2htZW50czogQXR0YWNobWVudFtdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghZW1iZWRzKSByZXR1cm47XG5cbiAgICBmb3IgKGNvbnN0IGVtYmVkIG9mIGVtYmVkcykge1xuICAgICAgaWYgKCFlbWJlZC5saW5rKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgbGlua2VkRmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGVtYmVkLmxpbmssIGZpbGUucGF0aCk7XG4gICAgICBpZiAoIWxpbmtlZEZpbGUgfHwgIShsaW5rZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHx8IGV4Y2x1ZGVMaXN0LmluY2x1ZGVzKGxpbmtlZEZpbGUubmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGF0dGFjaG1lbnQgPSBhd2FpdCB0aGlzLnByb2Nlc3NBdHRhY2htZW50KGFwcCwgbGlua2VkRmlsZSk7XG4gICAgICBpZiAoYXR0YWNobWVudCkge1xuICAgICAgICBhdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIHByb2Nlc3NBdHRhY2htZW50KGFwcDogQXBwLCBmaWxlOiBURmlsZSk6IFByb21pc2U8QXR0YWNobWVudCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBhcHAudmF1bHQucmVhZEJpbmFyeShmaWxlKTtcbiAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKTtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBtaW1lVHlwZSA9IE1pbWVUeXBlVXRpbHMuZ2V0TWltZVR5cGUoZXh0ZW5zaW9uKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICB0eXBlOiBleHRlbnNpb24sXG4gICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZSxcbiAgICAgICAgc2l6ZTogYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCxcbiAgICAgICAgZGF0YTogYmFzZTY0RGF0YSxcbiAgICAgICAgcGF0aDogZmlsZS5wYXRoXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBhdHRhY2htZW50ICR7ZmlsZS5uYW1lfTpgLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn0iLCAiZXhwb3J0IGNsYXNzIE1pbWVUeXBlVXRpbHMge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBtaW1lVHlwZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgcG5nOiAnaW1hZ2UvcG5nJyxcbiAgICBqcGc6ICdpbWFnZS9qcGVnJyxcbiAgICBqcGVnOiAnaW1hZ2UvanBlZycsXG4gICAgZ2lmOiAnaW1hZ2UvZ2lmJyxcbiAgICB3ZWJwOiAnaW1hZ2Uvd2VicCcsXG4gICAgc3ZnOiAnaW1hZ2Uvc3ZnK3htbCcsXG4gICAgbXAzOiAnYXVkaW8vbXBlZycsXG4gICAgd2F2OiAnYXVkaW8vd2F2JyxcbiAgICBvZ2c6ICdhdWRpby9vZ2cnLFxuICAgIG00YTogJ2F1ZGlvL21wNCcsXG4gICAgbXA0OiAndmlkZW8vbXA0JyxcbiAgICB3ZWJtOiAndmlkZW8vd2VibScsXG4gICAgb2d2OiAndmlkZW8vb2dnJyxcbiAgICBtb3Y6ICd2aWRlby9xdWlja3RpbWUnLFxuICAgIHBkZjogJ2FwcGxpY2F0aW9uL3BkZicsXG4gICAgZG9jOiAnYXBwbGljYXRpb24vbXN3b3JkJyxcbiAgICBkb2N4OiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgIGpzb246ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLFxuICAgIHppcDogJ2FwcGxpY2F0aW9uL3ppcCdcbiAgfTtcblxuICBzdGF0aWMgZ2V0TWltZVR5cGUoZXh0ZW5zaW9uPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5taW1lVHlwZXNbZXh0ZW5zaW9uPy50b0xvd2VyQ2FzZSgpID8/ICcnXSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgfVxuXG4gIHN0YXRpYyBnZXRFeHRlbnNpb25Gcm9tTWltZVR5cGUobWltZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgZm9yIChjb25zdCBbZXh0LCBtaW1lXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLm1pbWVUeXBlcykpIHtcbiAgICAgIGlmIChtaW1lVHlwZS5pbmNsdWRlcyhtaW1lKSkgcmV0dXJuIGAuJHtleHR9YDtcbiAgICB9XG4gICAgcmV0dXJuICcuYmluJztcbiAgfVxufSIsICJpbXBvcnQgeyBnZXRGcm9udE1hdHRlckluZm8sIHBhcnNlWWFtbCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFlBTUxQYXJzZXIge1xuICBzdGF0aWMgYXN5bmMgZ2V0RXhjbHVkZWRBdHRhY2htZW50cyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluZm8gPSBnZXRGcm9udE1hdHRlckluZm8oY29udGVudCk7XG4gICAgICBpZiAoIWluZm8uZXhpc3RzIHx8ICFpbmZvLmZyb250bWF0dGVyKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgLy8gVHJ5IHRvIHBhcnNlIFlBTUwgZnJvbnRtYXR0ZXJcbiAgICAgIGxldCBmcm9udG1hdHRlcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGluZm8uZnJvbnRtYXR0ZXIpO1xuICAgICAgfSBjYXRjaCAoeWFtbEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBZQU1MIGZyb250bWF0dGVyOicsIHlhbWxFcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIG51bGwgb3IgdW5kZWZpbmVkIGZyb250bWF0dGVyXG4gICAgICBpZiAoIWZyb250bWF0dGVyIHx8IHR5cGVvZiBmcm9udG1hdHRlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleGNsdWRlQXR0YWNobWVudCA9IGZyb250bWF0dGVyWydleGNsdWRlLWF0dGFjaG1lbnQnXTtcblxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0eXBlcyBvZiBleGNsdWRlLWF0dGFjaG1lbnQgdmFsdWVzXG4gICAgICBpZiAoIWV4Y2x1ZGVBdHRhY2htZW50KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBleGNsdWRlQXR0YWNobWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFtleGNsdWRlQXR0YWNobWVudF07XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGV4Y2x1ZGVBdHRhY2htZW50KSkge1xuICAgICAgICByZXR1cm4gZXhjbHVkZUF0dGFjaG1lbnRcbiAgICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKVxuICAgICAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKSlcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgZnJvbnRtYXR0ZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBpc1ZhbGlkWWFtbChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW5mbyA9IGdldEZyb250TWF0dGVySW5mbyhjb250ZW50KTtcbiAgICAgIGlmICghaW5mby5leGlzdHMgfHwgIWluZm8uZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIE5vIGZyb250bWF0dGVyIGlzIGNvbnNpZGVyZWQgdmFsaWRcbiAgICAgIH1cblxuICAgICAgcGFyc2VZYW1sKGluZm8uZnJvbnRtYXR0ZXIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0iLCAiaW1wb3J0IHsgZ2V0RnJvbnRNYXR0ZXJJbmZvLCBwYXJzZVlhbWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBXZWJob29rUGF5bG9hZCwgVmFyaWFibGVOb3RlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUGF5bG9hZFNlcnZpY2Uge1xuICBzdGF0aWMgY3JlYXRlUGF5bG9hZChcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICBhdHRhY2htZW50czogYW55W10sXG4gICAgc2VsZWN0ZWRUZXh0Pzogc3RyaW5nIHwgbnVsbCxcbiAgICB2YXJpYWJsZU5vdGU/OiBWYXJpYWJsZU5vdGUgfCBudWxsXG4gICk6IFdlYmhvb2tQYXlsb2FkIHtcbiAgICBjb25zdCBpbmZvID0gZ2V0RnJvbnRNYXR0ZXJJbmZvKGNvbnRlbnQpO1xuICAgIGxldCBwYXlsb2FkOiBXZWJob29rUGF5bG9hZDtcbiAgICBcbiAgICBpZiAoIWluZm8uZXhpc3RzKSB7XG4gICAgICBwYXlsb2FkID0ge1xuICAgICAgICBjb250ZW50OiBzZWxlY3RlZFRleHQgfHwgY29udGVudCxcbiAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgYXR0YWNobWVudHNcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGluZm8uZnJvbnRtYXR0ZXIpO1xuICAgICAgY29uc3Qgbm90ZUNvbnRlbnQgPSBzZWxlY3RlZFRleHQgfHwgY29udGVudC5zbGljZShpbmZvLmNvbnRlbnRTdGFydCkudHJpbSgpO1xuICAgICAgXG4gICAgICBwYXlsb2FkID0ge1xuICAgICAgICAuLi5mcm9udG1hdHRlcixcbiAgICAgICAgY29udGVudDogbm90ZUNvbnRlbnQsXG4gICAgICAgIGZpbGVuYW1lLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGF0dGFjaG1lbnRzXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEFkZCB2YXJpYWJsZXMgZnJvbSB2YXJpYWJsZSBub3RlIGlmIHByb3ZpZGVkXG4gICAgaWYgKHZhcmlhYmxlTm90ZT8udmFyaWFibGVzKSB7XG4gICAgICBwYXlsb2FkID0ge1xuICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAuLi52YXJpYWJsZU5vdGUudmFyaWFibGVzXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwYXlsb2FkO1xuICB9XG59IiwgImV4cG9ydCBjbGFzcyBDb250ZW50VHlwZVV0aWxzIHtcbiAgc3RhdGljIGlzVGV4dENvbnRlbnQoY29udGVudFR5cGUgPSAnJyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRleHRUeXBlcyA9IFtcbiAgICAgICd0ZXh0LycsXG4gICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnYXBwbGljYXRpb24veG1sJyxcbiAgICAgICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyxcbiAgICAgICdhcHBsaWNhdGlvbi9lY21hc2NyaXB0JyxcbiAgICAgICdhcHBsaWNhdGlvbi94LWh0dHBkLXBocCcsXG4gICAgICAnYXBwbGljYXRpb24veC15YW1sJ1xuICAgIF07XG4gICAgXG4gICAgY29udGVudFR5cGUgPSBjb250ZW50VHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiB0ZXh0VHlwZXMuc29tZSh0eXBlID0+IGNvbnRlbnRUeXBlLmluY2x1ZGVzKHR5cGUpKTtcbiAgfVxufSIsICJpbXBvcnQgeyBNaW1lVHlwZVV0aWxzIH0gZnJvbSAnLi9NaW1lVHlwZVV0aWxzJztcblxuZXhwb3J0IGNsYXNzIEZpbGVVdGlscyB7XG4gIHN0YXRpYyBnZW5lcmF0ZUZpbGVuYW1lKGNvbnRlbnRUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IE1pbWVUeXBlVXRpbHMuZ2V0RXh0ZW5zaW9uRnJvbU1pbWVUeXBlKGNvbnRlbnRUeXBlKTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBgd2ViaG9vay1yZXNwb25zZS0ke3RpbWVzdGFtcH0ke2V4dGVuc2lvbn1gO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFJlcXVlc3RVcmxSZXNwb25zZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IENvbnRlbnRUeXBlVXRpbHMgfSBmcm9tICcuLi91dGlscy9Db250ZW50VHlwZVV0aWxzJztcbmltcG9ydCB7IEZpbGVVdGlscyB9IGZyb20gJy4uL3V0aWxzL0ZpbGVVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBSZXNwb25zZUhhbmRsZXIge1xuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc1Jlc3BvbnNlKGFwcDogQXBwLCByZXNwb25zZTogUmVxdWVzdFVybFJlc3BvbnNlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IChyZXNwb25zZS5oZWFkZXJzPy5bJ2NvbnRlbnQtdHlwZSddIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycz8uWydDb250ZW50LVR5cGUnXSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRKc29uUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIGlmIChDb250ZW50VHlwZVV0aWxzLmlzVGV4dENvbnRlbnQoY29udGVudFR5cGUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRUZXh0UmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb2Nlc3NCaW5hcnlSZXNwb25zZShhcHAsIHJlc3BvbnNlLCBjb250ZW50VHlwZSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBmb3JtYXRKc29uUmVzcG9uc2UocmVzcG9uc2U6IFJlcXVlc3RVcmxSZXNwb25zZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpzb25EYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbjtcbiAgICAgIHJldHVybiAnYGBganNvblxcbicgKyBKU09OLnN0cmluZ2lmeShqc29uRGF0YSwgbnVsbCwgMikgKyAnXFxuYGBgJztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIEpTT04gcmVzcG9uc2U6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuICdGYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZm9ybWF0VGV4dFJlc3BvbnNlKHJlc3BvbnNlOiBSZXF1ZXN0VXJsUmVzcG9uc2UpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UudGV4dDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCB0ZXh0IHJlc3BvbnNlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiAnRmFpbGVkIHRvIGdldCB0ZXh0IHJlc3BvbnNlJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBwcm9jZXNzQmluYXJ5UmVzcG9uc2UoXG4gICAgYXBwOiBBcHAsIFxuICAgIHJlc3BvbnNlOiBSZXF1ZXN0VXJsUmVzcG9uc2UsXG4gICAgY29udGVudFR5cGU6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcjtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gRmlsZVV0aWxzLmdlbmVyYXRlRmlsZW5hbWUoY29udGVudFR5cGUpO1xuICAgICAgY29uc3QgYXR0YWNobWVudEZvbGRlciA9IChhcHAudmF1bHQgYXMgYW55KS5jb25maWc/LmF0dGFjaG1lbnRGb2xkZXJQYXRoIHx8ICdhdHRhY2htZW50cyc7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoYXR0YWNobWVudEZvbGRlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZ25vcmUgZXJyb3IgaWYgZm9sZGVyIGFscmVhZHkgZXhpc3RzXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBhcHAudmF1bHQuY3JlYXRlQmluYXJ5KFxuICAgICAgICBgJHthdHRhY2htZW50Rm9sZGVyfS8ke2ZpbGVuYW1lfWAsXG4gICAgICAgIGJ1ZmZlclxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGAhW1ske2ZpbGUubmFtZX1dXWA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIGJpbmFyeSByZXNwb25zZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gJ0ZhaWxlZCB0byBwcm9jZXNzIGJpbmFyeSByZXNwb25zZSc7XG4gICAgfVxuICB9XG59IiwgImV4cG9ydCBjbGFzcyBVcmxVdGlscyB7XG4gIHN0YXRpYyB2YWxpZGF0ZVVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICByZXR1cm4gcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cDonIHx8IHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXJpYWJsZU5vdGUsIElWYXJpYWJsZU5vdGVNb2RhbCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFZhcmlhYmxlTm90ZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9WYXJpYWJsZU5vdGVTZXJ2aWNlJztcbmltcG9ydCB7IFZhcmlhYmxlTm90ZVN1Z2dlc3RlciB9IGZyb20gJy4vY29tcG9uZW50cy9WYXJpYWJsZU5vdGVTdWdnZXN0ZXInO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVOb3RlTW9kYWwgZXh0ZW5kcyBNb2RhbCBpbXBsZW1lbnRzIElWYXJpYWJsZU5vdGVNb2RhbCB7XG4gIHByaXZhdGUgbm90ZXM6IFZhcmlhYmxlTm90ZVtdID0gW107XG4gIHByaXZhdGUgc2VsZWN0ZWROb3RlOiBWYXJpYWJsZU5vdGUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB3YXNTdWJtaXR0ZWQgPSBmYWxzZTtcbiAgb25TdWJtaXQ6IChub3RlOiBWYXJpYWJsZU5vdGUgfCBudWxsKSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TdWJtaXQ6IChub3RlOiBWYXJpYWJsZU5vdGUgfCBudWxsKSA9PiB2b2lkLCBvbkNhbmNlbDogKCkgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgIHRoaXMub25DYW5jZWwgPSBvbkNhbmNlbDtcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5ub3RlcyA9IGF3YWl0IFZhcmlhYmxlTm90ZVNlcnZpY2UuZmluZFZhcmlhYmxlTm90ZXModGhpcy5hcHAudmF1bHQsIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5ub3Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGNvbnRleHQgbm90ZXMgZm91bmQuIEFkZCBwb3N0LXdlYmhvb2s6IHRydWUgdG8gbm90ZSBmcm9udG1hdHRlci4nIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB3YXNTdWJtaXR0ZWQgdG8gdHJ1ZSBiZWZvcmUgb3BlbmluZyBzdWdnZXN0ZXJcbiAgICAgIHRoaXMud2FzU3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgLy8gT3BlbiB0aGUgc3VnZ2VzdGVyIGFmdGVyIGNsb3NpbmcgdGhpcyBtb2RhbFxuICAgICAgbmV3IFZhcmlhYmxlTm90ZVN1Z2dlc3RlcihcbiAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgIHRoaXMubm90ZXMsXG4gICAgICAgIChub3RlOiBWYXJpYWJsZU5vdGUpID0+IHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkTm90ZSA9IG5vdGU7XG4gICAgICAgICAgdGhpcy5vblN1Ym1pdChub3RlKTtcbiAgICAgICAgfVxuICAgICAgKS5vcGVuKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yIGxvYWRpbmcgY29udGV4dCBub3Rlcy4nIH0pO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBjb250ZXh0IG5vdGVzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGlmICghdGhpcy53YXNTdWJtaXR0ZWQpIHtcbiAgICAgIHRoaXMub25DYW5jZWwoKTtcbiAgICB9XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQsIE1ldGFkYXRhQ2FjaGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXJpYWJsZU5vdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZU5vdGVTZXJ2aWNlIHtcbiAgc3RhdGljIGFzeW5jIGZpbmRWYXJpYWJsZU5vdGVzKHZhdWx0OiBWYXVsdCwgbWV0YWRhdGFDYWNoZTogTWV0YWRhdGFDYWNoZSk6IFByb21pc2U8VmFyaWFibGVOb3RlW10+IHtcbiAgICBjb25zdCBub3RlczogVmFyaWFibGVOb3RlW10gPSBbXTtcbiAgICBcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBtYXJrZG93bkZpbGVzKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IG1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI7XG4gICAgICBcbiAgICAgIGlmIChmcm9udG1hdHRlcj8uWydwb3N0LXdlYmhvb2snXSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gdGhpcy5wYXJzZVZhcmlhYmxlcyhjb250ZW50KTtcbiAgICAgICAgXG4gICAgICAgIG5vdGVzLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICB2YXJpYWJsZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBub3RlcztcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHBhcnNlVmFyaWFibGVzKGNvbnRlbnQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IHZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgXG4gICAgbGV0IGN1cnJlbnRLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGxldCBjdXJyZW50VmFsdWU6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14tLShbXFx3X10rKS8pO1xuICAgICAgXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gU2F2ZSBwcmV2aW91cyB2YXJpYWJsZSBpZiBleGlzdHNcbiAgICAgICAgaWYgKGN1cnJlbnRLZXkpIHtcbiAgICAgICAgICB2YXJpYWJsZXNbY3VycmVudEtleV0gPSBjdXJyZW50VmFsdWUuam9pbignXFxuJykudHJpbSgpO1xuICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRLZXkgPSBtYXRjaFsxXTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEtleSkge1xuICAgICAgICBjdXJyZW50VmFsdWUucHVzaChsaW5lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2F2ZSBsYXN0IHZhcmlhYmxlXG4gICAgaWYgKGN1cnJlbnRLZXkpIHtcbiAgICAgIHZhcmlhYmxlc1tjdXJyZW50S2V5XSA9IGN1cnJlbnRWYWx1ZS5qb2luKCdcXG4nKS50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB2YXJpYWJsZXM7XG4gIH1cbn0iLCAiaW1wb3J0IHsgRnV6enlTdWdnZXN0TW9kYWwsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmFyaWFibGVOb3RlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVOb3RlU3VnZ2VzdGVyIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8VmFyaWFibGVOb3RlPiB7XG4gIHByaXZhdGUgbm90ZXM6IFZhcmlhYmxlTm90ZVtdO1xuICBwcml2YXRlIG9uQ2hvb3NlOiAobm90ZTogVmFyaWFibGVOb3RlKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogYW55LCBub3RlczogVmFyaWFibGVOb3RlW10sIG9uQ2hvb3NlOiAobm90ZTogVmFyaWFibGVOb3RlKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLm5vdGVzID0gbm90ZXM7XG4gICAgdGhpcy5vbkNob29zZSA9IG9uQ2hvb3NlO1xuICB9XG5cbiAgZ2V0SXRlbXMoKTogVmFyaWFibGVOb3RlW10ge1xuICAgIHJldHVybiB0aGlzLm5vdGVzO1xuICB9XG5cbiAgZ2V0SXRlbVRleHQoaXRlbTogVmFyaWFibGVOb3RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaXRlbS50aXRsZTtcbiAgfVxuXG4gIG9uQ2hvb3NlSXRlbShpdGVtOiBWYXJpYWJsZU5vdGUpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hvb3NlKGl0ZW0pO1xuICB9XG5cbiAgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBhbnksIGVsOiBIVE1MRWxlbWVudCkge1xuICAgIGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaXRlbS5pdGVtLnRpdGxlIH0pO1xuICAgIGVsLmNyZWF0ZUVsKFwic21hbGxcIiwgeyB0ZXh0OiBpdGVtLml0ZW0ucGF0aCB9KTtcbiAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG9CQUF1Qjs7O0FDQXZCLElBQUFDLG1CQUErQzs7O0FDQS9DLHNCQUF3QjtBQUdqQixJQUFNLGNBQU4sTUFBa0I7QUFBQSxFQUN2QixZQUNVLFdBQ0EsU0FDQSxPQUNBLFVBQ0EsVUFDUjtBQUxRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFUixTQUFLLFFBQVE7QUFBQSxFQUNmO0FBQUEsRUFFUSxVQUFnQjtBQUN0QixRQUFJLHdCQUFRLEtBQUssU0FBUyxFQUN2QixRQUFRLGNBQWMsRUFDdEIsUUFBUSwrQkFBK0IsRUFDdkMsUUFBUSxVQUFRLEtBQ2QsU0FBUyxLQUFLLFFBQVEsSUFBSSxFQUMxQixTQUFTLE9BQU8sVUFBVTtBQUN6QixZQUFNLEtBQUssU0FBUyxLQUFLLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUFBLElBQ2pELENBQUMsQ0FBQztBQUVOLFFBQUksd0JBQVEsS0FBSyxTQUFTLEVBQ3ZCLFFBQVEsYUFBYSxFQUNyQixRQUFRLGdDQUFnQyxFQUN4QyxRQUFRLFVBQVEsS0FDZCxTQUFTLEtBQUssUUFBUSxHQUFHLEVBQ3pCLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLFlBQU0sS0FBSyxTQUFTLEtBQUssT0FBTyxFQUFFLEtBQUssTUFBTSxDQUFDO0FBQUEsSUFDaEQsQ0FBQyxDQUFDO0FBRU4sUUFBSSx3QkFBUSxLQUFLLFNBQVMsRUFDdkIsUUFBUSxpQkFBaUIsRUFDekIsUUFBUSxxQ0FBcUMsRUFDN0MsVUFBVSxZQUFVLE9BQ2xCLFNBQVMsS0FBSyxRQUFRLGNBQWMsRUFDcEMs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QUMzQyxvQkFBTSxpQkFBaUIsT0FBTyxlQUFlLEVBQUUsQ0FBQztBQUNoRCxvQkFBTSxNQUFNLGVBQWUsS0FBSyxPQUFPLGVBQWUsT0FBTyxPQUNsRCxlQUFlLE9BQU8sZUFBZTtBQUNoRCxxQkFBTyxhQUFhO0FBQUEsRUFBSyxTQUFTLFFBQVEsR0FBRztBQUFBLFlBQy9DO0FBRUEsZ0JBQUksd0JBQU8scUJBQXFCLFFBQVEsTUFBTTtBQUFBLFVBQ2hELFNBQVMsT0FBUDtBQUNBLGdCQUFJLHdCQUFPLDZCQUE2QixpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLLEdBQUc7QUFBQSxVQUNsRztBQUFBLFFBQ0Y7QUFBQSxNQUNGLENBQUM7QUFDRCxXQUFLLG1CQUFtQixJQUFJLGtCQUFrQjtBQUFBLElBQ2hELENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxxQkFBMkI7QUFDekIsU0FBSyxtQkFBbUIsUUFBUSxlQUFhO0FBQzNDLE1BQUMsS0FBSyxPQUFPLElBQVksU0FBUyxjQUFjLFNBQVM7QUFBQSxJQUMzRCxDQUFDO0FBQ0QsU0FBSyxtQkFBbUIsTUFBTTtBQUFBLEVBQ2hDO0FBQ0Y7OztBSHBHQSxJQUFNLG1CQUFvQztBQUFBLEVBQ3hDLFVBQVUsQ0FBQztBQUFBLElBQ1QsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sS0FBSztBQUFBLElBQ0wsZ0JBQWdCO0FBQUEsRUFDbEIsQ0FBQztBQUFBLEVBQ0QscUJBQXFCO0FBQ3ZCO0FBRUEsSUFBcUIsb0JBQXJCLGNBQStDLHlCQUFPO0FBQUEsRUFJcEQsTUFBTSxTQUFTO0FBQ2IsVUFBTSxLQUFLLGFBQWE7QUFFeEIsU0FBSyxrQkFBa0IsSUFBSSxnQkFBZ0IsSUFBSTtBQUMvQyxTQUFLLGdCQUFnQixpQkFBaUI7QUFFdEMsU0FBSyxjQUFjLElBQUksbUJBQW1CLEtBQUssS0FBSyxJQUFJLENBQUM7QUFBQSxFQUMzRDtBQUFBLEVBRUEsV0FBVztBQTVCYjtBQTZCSSxxQkFBSyxvQkFBTCxtQkFBc0IsbUJBQXRCLG1CQUFzQztBQUFBLEVBQ3hDO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMzRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBcEN2QjtBQXFDSSxVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFDakMsZUFBSyxvQkFBTCxtQkFBc0I7QUFBQSxFQUN4QjtBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
